/* @license 
 * jQuery.print, version 1.6.1
 * Licence: CC-By (http://creativecommons.org/licenses/by/3.0/)
 *--------------------------------------------------------------------------*/
!function(e){"use strict";function t(t,n,r){var o,a,i,l,c,d=e(t),f=d.clone(n,r),s=d.find("textarea").add(d.filter("textarea")),p=f.find("textarea").add(f.filter("textarea")),u=d.find("select").add(d.filter("select")),h=f.find("select").add(f.filter("select")),m=d.find("canvas").add(d.filter("canvas")),y=f.find("canvas").add(f.filter("canvas"));for(o=0,a=s.length;o<a;++o)e(p[o]).val(e(s[o]).val());for(o=0,a=u.length;o<a;++o)for(i=0,l=u[o].options.length;i<l;++i)!0===u[o].options[i].selected&&(h[o].options[i].selected=!0);for(o=0,a=m.length;o<a;++o)(c=m[o].getContext("2d"))&&(y[o].getContext("2d").drawImage(m[o],0,0),e(y[o]).attr("data-jquery-print",c.canvas.toDataURL()));return f}function n(n){var r=e("");try{r=t(n)}catch(t){r=e("<span />").html(n)}return r}function r(t,n,r){var o=e.Deferred();try{var a=(t=t.contentWindow||t.contentDocument||t).document||t.contentDocument||t;r.doctype&&a.write(r.doctype),a.write(n);try{for(var i=a.querySelectorAll("canvas"),l=0;l<i.length;l++){var c=i[l].getContext("2d"),d=new Image;d.onload=function(){c.drawImage(d,0,0)},d.src=i[l].getAttribute("data-jquery-print")}}catch(e){console.warn(e)}a.close();var f=!1,s=function(){if(!f){t.focus();try{t.document.execCommand("print",!1,null)||t.print(),e("body").focus()}catch(e){t.print()}t.close(),f=!0,o.resolve()}};e(t).on("load",s),setTimeout(s,r.timeout)}catch(e){o.reject(e)}return o}function o(e,t){return r(window.open(),e,t).always(function(){try{t.deferred.resolve()}catch(e){console.warn("Error notifying deferred",e)}})}function a(e){return!!("object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}e.print=e.fn.print=function(){var i,l,c=this;c instanceof e&&(c=c.get(0)),a(c)?(l=e(c),arguments.length>0&&(i=arguments[0])):arguments.length>0?a((l=e(arguments[0]))[0])?arguments.length>1&&(i=arguments[1]):(i=arguments[0],l=e("html")):l=e("html");var d={globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:e.Deferred(),timeout:750,title:null,doctype:"<!doctype html>"};i=e.extend({},d,i||{});var f=e("");i.globalStyles?f=e("style, link, meta, base, title"):i.mediaPrint&&(f=e("link[media=print]")),i.stylesheet&&(f=e.merge(f,e('<link rel="stylesheet" href="'+i.stylesheet+'">')));var s=t(l,!0,!0);if((s=e("<span/>").append(s)).find(i.noPrintSelector).remove(),s.append(t(f)),i.title){var p=e("title",s);0===p.length&&(p=e("<title />"),s.append(p)),p.text(i.title)}s.append(n(i.append)),s.prepend(n(i.prepend)),i.manuallyCopyFormValues&&(s.find("input").each(function(){var t=e(this);t.is("[type='radio']")||t.is("[type='checkbox']")?t.prop("checked")&&t.attr("checked","checked"):t.attr("value",t.val())}),s.find("select").each(function(){e(this).find(":selected").attr("selected","selected")}),s.find("textarea").each(function(){var t=e(this);t.text(t.val())}));var u=s.html();try{i.deferred.notify("generated_markup",u,s)}catch(e){console.warn("Error notifying deferred",e)}if(s.remove(),i.iframe)try{!function(t,n){var a=e(n.iframe+""),i=a.length;0===i&&(a=e('<iframe height="0" width="0" border="0" wmode="Opaque"/>').prependTo("body").css({position:"absolute",top:-999,left:-999})),r(a.get(0),t,n).done(function(){setTimeout(function(){0===i&&a.remove()},1e3)}).fail(function(e){console.error("Failed to print from iframe",e),o(t,n)}).always(function(){try{n.deferred.resolve()}catch(e){console.warn("Error notifying deferred",e)}})}(u,i)}catch(e){console.error("Failed to print from iframe",e.stack,e.message),o(u,i)}else o(u,i);return this}}(jQuery);